<div class="max-w-3xl mx-auto">
  <%# Cabeçalho do Quiz %>
  <div class="bg-[#1F2937] shadow-lg rounded-lg p-6 mb-6">
    <div class="flex justify-between items-center mb-4">
      <h1 class="text-2xl font-bold text-white"><%= @questionnaire.title %></h1>
      <div class="flex items-center space-x-2 text-slate-400">
        <i class="fas fa-clock"></i>
        <span><%= @questionnaire.duration_minutes %> minutos</span>
      </div>
    </div>
    
    <%# Barra de Progresso %>
    <div class="relative pt-1">
      <div class="flex mb-2 items-center justify-between">
        <div>
          <span class="text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full bg-[#4f46e5] text-white">
            Progresso
          </span>
        </div>
        <div class="text-right">
          <span class="text-xs font-semibold inline-block text-slate-400">
            Pergunta <%= @questionnaire.questions.order(:created_at).index(@question) + 1 %> de <%= @questionnaire.questions.count %>
          </span>
        </div>
      </div>
      <div class="flex h-2 mb-4 overflow-hidden rounded bg-slate-700">
        <div
          style="width: <%= (@questionnaire.questions.order(:created_at).index(@question) + 1).to_f / @questionnaire.questions.count * 100 %>%"
          class="flex flex-col justify-center rounded bg-[#4f46e5] transition-all duration-500"
        ></div>
      </div>
    </div>
  </div>

  <%# Conteúdo da Pergunta %>
  <div class="bg-[#1F2937] shadow-lg rounded-lg overflow-hidden">
    <%# Enunciado %>
    <div class="p-6 border-b border-slate-700">
      <h2 class="text-xl font-semibold text-white"><%= @question.enunciation %></h2>
      <% if flash[:alert] %>
        <div class="mt-4 bg-red-900 border border-red-700 text-red-200 px-4 py-3 rounded-lg flex items-center" role="alert">
          <i class="fas fa-exclamation-circle mr-2"></i>
          <%= flash[:alert] %>
        </div>
      <% end %>
    </div>

    <%# Formulário de Opções %>
    <%= form_with(url: questionnaire_submit_quiz_answer_path(@questionnaire, @question), method: :post, class: "p-6") do |form| %>
      <div class="space-y-4 mb-6">
        <% @question.question_options.order(:created_at).each do |option| %>
          <label for="selected_option_id_<%= option.id %>" 
                class="block p-4 border-2 border-slate-700 rounded-lg hover:border-[#4f46e5] cursor-pointer transition-all duration-200
                      hover:bg-slate-800 has-[:checked]:bg-[#4f46e5] has-[:checked]:border-[#4338ca]">
            <div class="flex items-center">
              <div class="w-6 h-6 border-2 rounded-full border-slate-600 flex items-center justify-center mr-4
                          group-has-[:checked]:border-white">
                <%= form.radio_button :selected_option_id, option.id, class: "hidden" %>
                <div class="w-3 h-3 rounded-full bg-white opacity-0 transition-opacity duration-200 has-[:checked]:opacity-100"></div>
              </div>
              <span class="text-lg font-medium text-slate-300"><%= option.title %></span>
            </div>
          </label>
        <% end %>
      </div>

      <%# Botão de Envio %>
      <div class="flex justify-between items-center">
        <%= link_to questionnaires_path, 
            class: "text-slate-400 hover:text-white transition-colors flex items-center",
            data: { turbo_confirm: "Tem certeza que deseja sair? Seu progresso será perdido." } do %>
          <i class="fas fa-times mr-2"></i>
          Sair do Quiz
        <% end %>

        <%= form.button type: "submit",
            class: "bg-[#4f46e5] hover:bg-[#4338ca] text-white font-bold py-3 px-6 rounded-lg transition-all
                   flex items-center space-x-2 hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-[#4f46e5] focus:ring-offset-2 focus:ring-offset-[#111827]" do %>
          <span>Próxima Pergunta</span>
          <i class="fas fa-arrow-right"></i>
        <% end %>
      </div>
    <% end %>
  </div>
</div>