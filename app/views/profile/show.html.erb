<%# Profile View %>
<div class="max-w-4xl mx-auto">
  <div class="bg-[#1F2937] shadow-lg rounded-lg p-8 mb-8">
    <%# Cabeçalho do Perfil %>
    <div class="flex items-center space-x-4 mb-6">
      <div class="bg-[#4f46e5] rounded-full p-4">
        <span class="text-3xl"><%= @user.email.first.upcase %></span>
      </div>
      <div>
        <h1 class="text-2xl font-bold text-white"><%= @user.email %></h1>
        <p class="text-slate-400">Membro desde <%= l(@user.created_at, format: :long) %></p>
      </div>
    </div>

    <%# Estatísticas do Usuário %>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
      <div class="bg-[#111827] rounded-lg p-4 text-center">
        <p class="text-slate-400">Total de Quizzes</p>
        <p class="text-3xl font-bold text-white"><%= @quiz_results.count %></p>
      </div>
      <div class="bg-[#111827] rounded-lg p-4 text-center">
        <p class="text-slate-400">Média de Pontuação</p>
        <p class="text-3xl font-bold text-white">
          <%= number_to_percentage(@quiz_results.average(:score) || 0, precision: 0) %>
        </p>
      </div>
      <div class="bg-[#111827] rounded-lg p-4 text-center">
        <p class="text-slate-400">Melhor Pontuação</p>
        <p class="text-3xl font-bold text-white">
          <%= number_to_percentage(@quiz_results.maximum(:score) || 0, precision: 0) %>
        </p>
      </div>
    </div>
  </div>

  <%# Histórico de Quizzes %>
  <div class="bg-[#1F2937] shadow-lg rounded-lg p-8">
    <h2 class="text-2xl font-bold text-white mb-6">Histórico de Quizzes</h2>
    
    <% if @quiz_results.any? %>
      <div class="space-y-4">
        <% @quiz_results.each do |result| %>
          <div class="bg-[#111827] rounded-lg p-4 flex items-center justify-between transition-transform hover:scale-[1.01]">
            <div>
              <h3 class="text-lg font-semibold text-white">
                <%= result.questionnaire.title %>
              </h3>
              <p class="text-sm text-slate-400">
                Realizado em: <%= l(result.submitted_at, format: :long) %>
              </p>
            </div>
            <div class="text-right">
              <p class="text-2xl font-bold text-white">
                <%= number_to_percentage(result.score, precision: 0) %>
              </p>
              <p class="text-sm text-slate-400">
                <%= result.correct_answers %> de <%= result.total_questions %> corretas
              </p>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <p class="text-center text-slate-400">
        Você ainda não completou nenhum quiz.
        <%= link_to "Comece agora!", root_path, class: "text-[#4f46e5] hover:text-[#4338ca]" %>
      </p>
    <% end %>
  </div>
</div>